<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Warda Kumush - Handmade Elegance</title>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    @keyframes fadeInScale {
      0% {
        opacity: 0;
        transform: scale(0.5);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }
    
    @keyframes fadeOut {
      0% {
        opacity: 1;
      }
      100% {
        opacity: 0;
      }
    }
    
    @keyframes slideInUp {
      0% {
        opacity: 0;
        transform: translateY(30px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes floatAnimation {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-10px);
      }
    }
    
    .splash-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      animation: fadeOut 0.5s ease-in-out 2.5s forwards;
    }
    
    .splash-text {
      font-size: 3.5rem;
      font-weight: 700;
      color: white;
      animation: fadeInScale 1s ease-out;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
      font-family: 'Georgia', serif;
    }
    
    .main-content {
      opacity: 0;
      animation: slideInUp 0.8s ease-out 3s forwards;
    }
    
    .product-card {
      transition: all 0.3s ease;
      animation: slideInUp 0.6s ease-out backwards;
    }
    
    .product-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 24px rgba(0,0,0,0.15);
    }
    
    .float-animation {
      animation: floatAnimation 3s ease-in-out infinite;
    }
    
    .btn-primary {
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
      transform: scale(1.05);
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
    }
    
    .cart-badge {
      animation: fadeInScale 0.3s ease-out;
    }
    
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    
    .modal.active {
      display: flex;
    }
    
    .modal-content {
      background: white;
      border-radius: 16px;
      max-width: 500px;
      width: 90%;
      max-height: 90%;
      overflow-y: auto;
      animation: slideInUp 0.3s ease-out;
    }
    
    .toast {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #10b981;
      color: white;
      padding: 16px 24px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      z-index: 2000;
      animation: slideInUp 0.3s ease-out;
    }
    
    .hide {
      display: none !important;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="w-full"><!-- Splash Screen -->
  <div class="splash-screen" id="splashScreen">
   <div class="splash-text">
    Warda Kumush
   </div>
  </div><!-- Main Content -->
  <div class="main-content w-full" style="min-height: 100%;"><!-- Navigation -->
   <nav class="w-full" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px 0;">
    <div style="max-width: 1200px; margin: 0 auto; padding: 0 24px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
     <div style="display: flex; align-items: center; gap: 12px;"><span style="font-size: 2rem;">‚ú®</span>
      <h1 id="brandName" style="font-size: 1.875rem; font-weight: 700; color: white; font-family: 'Georgia', serif;">Warda Kumush</h1>
     </div>
     <div style="display: flex; gap: 16px; align-items: center; margin-top: 12px; flex-wrap: wrap;"><button id="trackOrderBtn" style="background: rgba(255,255,255,0.2); color: white; padding: 10px 20px; border-radius: 9999px; font-weight: 600; border: none; cursor: pointer; backdrop-filter: blur(10px);" class="btn-primary"> üì¶ Track Order </button> <button id="cartBtn" style="position: relative; background: white; color: #667eea; padding: 10px 20px; border-radius: 9999px; font-weight: 600; border: none; cursor: pointer;" class="btn-primary"> üõí Cart (<span id="cartCount">0</span>) </button> <button id="signInBtn" style="background: rgba(255,255,255,0.2); color: white; padding: 10px 20px; border-radius: 9999px; font-weight: 600; border: none; cursor: pointer; backdrop-filter: blur(10px);" class="btn-primary"> Sign In </button> <button id="signUpBtn" style="background: white; color: #667eea; padding: 10px 20px; border-radius: 9999px; font-weight: 600; border: none; cursor: pointer;" class="btn-primary"> Sign Up </button>
     </div>
    </div>
   </nav><!-- Hero Section -->
   <section class="w-full" style="background: linear-gradient(135deg, #ffeef8 0%, #e6e6fa 100%); padding: 80px 24px;">
    <div style="max-width: 1200px; margin: 0 auto; text-align: center;">
     <h2 id="tagline" class="float-animation" style="font-size: 3rem; font-weight: 700; color: #667eea; margin-bottom: 24px; font-family: 'Georgia', serif;">Handmade Elegance</h2>
     <p style="font-size: 1.25rem; color: #555; margin-bottom: 32px;">Beautiful soft products crafted with love</p><button onclick="document.getElementById('products').scrollIntoView({behavior: 'smooth'})" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 16px 32px; border-radius: 9999px; font-weight: 600; border: none; cursor: pointer; font-size: 1.125rem;" class="btn-primary"> Shop Now </button>
    </div>
   </section><!-- Products Section -->
   <section id="products" class="w-full" style="padding: 80px 24px; background: #f9fafb;">
    <div style="max-width: 1200px; margin: 0 auto;">
     <h2 id="productsHeading" style="font-size: 2.5rem; font-weight: 700; text-align: center; margin-bottom: 48px; color: #333; font-family: 'Georgia', serif;">Our Beautiful Collection</h2>
     <div id="productGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 32px;"><!-- Products will be rendered here -->
     </div>
    </div>
   </section><!-- Web Development CTA -->
   <section class="w-full" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 60px 24px;">
    <div style="max-width: 800px; margin: 0 auto; text-align: center;">
     <h3 style="font-size: 2rem; font-weight: 700; color: white; margin-bottom: 16px;">Create Your Own Website!</h3>
     <p style="font-size: 1.25rem; color: white; margin-bottom: 24px;">Professional website development in just ‚Çπ499</p><a href="tel:+916397884131" style="display: inline-block; background: white; color: #667eea; padding: 16px 32px; border-radius: 9999px; font-weight: 600; text-decoration: none; font-size: 1.125rem;" class="btn-primary"> Contact Now: +91 6397884131 </a>
    </div>
   </section><!-- Footer -->
   <footer class="w-full" style="background: #1f2937; color: white; padding: 48px 24px;">
    <div style="max-width: 1200px; margin: 0 auto;">
     <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 32px; margin-bottom: 32px;">
      <div>
       <h4 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 16px;">Warda Kumush</h4>
       <p style="color: #9ca3af;">Handmade soft products with love and care</p>
      </div>
      <div>
       <h4 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 16px;">Company Contact</h4>
       <p style="color: #9ca3af; margin-bottom: 8px;">üìç Bukhara, Bijnor 246701</p>
       <p style="color: #9ca3af; margin-bottom: 8px;">üë§ Managed by: Maher Aalam</p>
       <p style="color: #9ca3af;">üè¢ Proprietorship: Alisha Parveen</p>
      </div>
      <div>
       <h4 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 16px;">Developer</h4>
       <p id="developerCredit" style="color: #9ca3af; margin-bottom: 8px;">Website developed by Aqib Javed</p>
       <p style="color: #9ca3af;">üìû +91 6397884131</p>
      </div>
     </div>
     <div style="border-top: 1px solid #374151; padding-top: 24px; text-align: center;">
      <p id="footerCopyright" style="color: #9ca3af;">¬© 2024 Warda Kumush. All rights reserved.</p>
     </div>
    </div>
   </footer>
  </div><!-- Cart Modal -->
  <div id="cartModal" class="modal">
   <div class="modal-content" style="padding: 32px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
     <h3 style="font-size: 1.875rem; font-weight: 700; color: #333;">Your Cart</h3><button onclick="closeCart()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #666;">√ó</button>
    </div>
    <div id="cartItems" style="margin-bottom: 24px;"><!-- Cart items will be rendered here -->
    </div>
    <div style="border-top: 2px solid #e5e7eb; padding-top: 16px; margin-bottom: 24px;">
     <div style="display: flex; justify-content: space-between; font-size: 1.25rem; font-weight: 700;"><span>Total:</span> <span id="cartTotal">‚Çπ0</span>
     </div>
    </div><button onclick="proceedToCheckout()" style="width: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 16px; border-radius: 8px; font-weight: 600; border: none; cursor: pointer; font-size: 1.125rem;" class="btn-primary"> Proceed to Checkout </button>
   </div>
  </div><!-- Checkout Modal -->
  <div id="checkoutModal" class="modal">
   <div class="modal-content" style="padding: 32px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
     <h3 style="font-size: 1.875rem; font-weight: 700; color: #333;">Checkout</h3><button onclick="closeCheckout()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #666;">√ó</button>
    </div>
    <form id="checkoutForm" onsubmit="handleCheckout(event)" style="display: flex; flex-direction: column; gap: 16px;">
     <div><label for="checkoutName" style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">Full Name</label> <input type="text" id="checkoutName" required style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem;">
     </div>
     <div><label for="checkoutEmail" style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">Email</label> <input type="email" id="checkoutEmail" required style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem;">
     </div>
     <div><label for="checkoutPhone" style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">Phone Number</label> <input type="tel" id="checkoutPhone" required style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem;">
     </div>
     <div><label for="checkoutAddress" style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">Shipping Address</label> <textarea id="checkoutAddress" required rows="3" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem;"></textarea>
     </div><button type="submit" id="checkoutSubmitBtn" style="width: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 16px; border-radius: 8px; font-weight: 600; border: none; cursor: pointer; font-size: 1.125rem;" class="btn-primary"> Place Order </button>
    </form>
   </div>
  </div><!-- Track Order Modal -->
  <div id="trackOrderModal" class="modal">
   <div class="modal-content" style="padding: 32px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
     <h3 style="font-size: 1.875rem; font-weight: 700; color: #333;">Track Your Order</h3><button onclick="closeTrackOrder()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #666;">√ó</button>
    </div>
    <div id="userOrdersContent"><!-- Orders will be rendered here -->
    </div>
   </div>
  </div><!-- Auth Modal -->
  <div id="authModal" class="modal">
   <div class="modal-content" style="padding: 32px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
     <h3 id="authTitle" style="font-size: 1.875rem; font-weight: 700; color: #333;">Sign In</h3><button onclick="closeAuth()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #666;">√ó</button>
    </div>
    <form id="authForm" onsubmit="handleAuth(event)" style="display: flex; flex-direction: column; gap: 16px;">
     <div id="nameField" class="hide"><label for="authName" style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">Full Name</label> <input type="text" id="authName" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem;">
     </div>
     <div><label for="authEmail" style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">Email</label> <input type="email" id="authEmail" required style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem;">
     </div>
     <div><label for="authPassword" style="display: block; margin-bottom: 8px; font-weight: 600; color: #333;">Password</label> <input type="password" id="authPassword" required style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem;">
     </div><button type="submit" id="authSubmitBtn" style="width: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 16px; border-radius: 8px; font-weight: 600; border: none; cursor: pointer; font-size: 1.125rem;" class="btn-primary"> Sign In </button> <button type="button" id="toggleAuthBtn" onclick="toggleAuthMode()" style="width: 100%; background: white; color: #667eea; padding: 12px; border: 2px solid #667eea; border-radius: 8px; font-weight: 600; cursor: pointer;"> Don't have an account? Sign Up </button>
    </form>
   </div>
  </div>
  <script>
    const defaultConfig = {
      brand_name: "Warda Kumush",
      tagline: "Handmade Elegance",
      products_heading: "Our Beautiful Collection",
      footer_copyright: "¬© 2024 Warda Kumush. All rights reserved.",
      developer_credit: "Website developed by Aqib Javed",
      primary_color: "#667eea",
      secondary_color: "#764ba2",
      background_color: "#f9fafb",
      text_color: "#333333",
      accent_color: "#ffeef8"
    };

    const products = [
      { id: 1, name: "Parandi", price: 299, emoji: "üéÄ", description: "Beautiful traditional parandi" },
      { id: 2, name: "Scrunchies", price: 149, emoji: "üå∏", description: "Soft handmade scrunchies" },
      { id: 3, name: "Bangle", price: 399, emoji: "üí´", description: "Elegant handcrafted bangles" },
      { id: 4, name: "Crochet Mirror Keychain", price: 199, emoji: "üîë", description: "Cute crochet mirror keychain" },
      { id: 5, name: "Gajra", price: 249, emoji: "üå∫", description: "Fresh handmade gajra" }
    ];

    let cart = [];
    let currentUser = null;
    let isSignUp = false;
    let allUsers = [];
    let allOrders = [];

    const dataHandler = {
      onDataChanged(data) {
        allUsers = data.filter(record => record.type === 'user');
        allOrders = data.filter(record => record.type === 'order');
        
        // Always update track order modal if it's open and user is logged in
        if (currentUser && document.getElementById('trackOrderModal').classList.contains('active')) {
          renderUserOrders();
        }
      }
    };

    async function initApp() {
      const result = await window.dataSdk.init(dataHandler);
      if (!result.isOk) {
        console.error("Failed to initialize data SDK");
      }
      
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange: async (config) => {
            document.getElementById('brandName').textContent = config.brand_name || defaultConfig.brand_name;
            document.getElementById('tagline').textContent = config.tagline || defaultConfig.tagline;
            document.getElementById('productsHeading').textContent = config.products_heading || defaultConfig.products_heading;
            document.getElementById('footerCopyright').textContent = config.footer_copyright || defaultConfig.footer_copyright;
            document.getElementById('developerCredit').textContent = config.developer_credit || defaultConfig.developer_credit;
          },
          mapToCapabilities: (config) => ({
            recolorables: [
              {
                get: () => config.primary_color || defaultConfig.primary_color,
                set: (value) => {
                  window.elementSdk.config.primary_color = value;
                  window.elementSdk.setConfig({ primary_color: value });
                }
              },
              {
                get: () => config.secondary_color || defaultConfig.secondary_color,
                set: (value) => {
                  window.elementSdk.config.secondary_color = value;
                  window.elementSdk.setConfig({ secondary_color: value });
                }
              },
              {
                get: () => config.background_color || defaultConfig.background_color,
                set: (value) => {
                  window.elementSdk.config.background_color = value;
                  window.elementSdk.setConfig({ background_color: value });
                }
              },
              {
                get: () => config.text_color || defaultConfig.text_color,
                set: (value) => {
                  window.elementSdk.config.text_color = value;
                  window.elementSdk.setConfig({ text_color: value });
                }
              },
              {
                get: () => config.accent_color || defaultConfig.accent_color,
                set: (value) => {
                  window.elementSdk.config.accent_color = value;
                  window.elementSdk.setConfig({ accent_color: value });
                }
              }
            ],
            borderables: [],
            fontEditable: undefined,
            fontSizeable: undefined
          }),
          mapToEditPanelValues: (config) => new Map([
            ["brand_name", config.brand_name || defaultConfig.brand_name],
            ["tagline", config.tagline || defaultConfig.tagline],
            ["products_heading", config.products_heading || defaultConfig.products_heading],
            ["footer_copyright", config.footer_copyright || defaultConfig.footer_copyright],
            ["developer_credit", config.developer_credit || defaultConfig.developer_credit]
          ])
        });
      }
      
      renderProducts();
    }

    function renderProducts() {
      const grid = document.getElementById('productGrid');
      grid.innerHTML = products.map((product, index) => `
        <div class="product-card" style="background: white; border-radius: 16px; padding: 24px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); animation-delay: ${index * 0.1}s;">
          <div style="font-size: 4rem; text-align: center; margin-bottom: 16px;">${product.emoji}</div>
          <h3 style="font-size: 1.5rem; font-weight: 700; color: #333; margin-bottom: 8px; text-align: center;">${product.name}</h3>
          <p style="color: #666; margin-bottom: 16px; text-align: center;">${product.description}</p>
          <div style="display: flex; justify-content: space-between; align-items: center;">
            <span style="font-size: 1.5rem; font-weight: 700; color: #667eea;">‚Çπ${product.price}</span>
            <button onclick="addToCart(${product.id})" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 10px 20px; border-radius: 9999px; font-weight: 600; border: none; cursor: pointer;" class="btn-primary">
              Add to Cart
            </button>
          </div>
        </div>
      `).join('');
    }

    function addToCart(productId) {
      const product = products.find(p => p.id === productId);
      const existingItem = cart.find(item => item.id === productId);
      
      if (existingItem) {
        existingItem.quantity++;
      } else {
        cart.push({ ...product, quantity: 1 });
      }
      
      updateCartCount();
      showToast('Added to cart! üéâ');
    }

    function updateCartCount() {
      const count = cart.reduce((sum, item) => sum + item.quantity, 0);
      document.getElementById('cartCount').textContent = count;
    }

    function showToast(message) {
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);
    }

    document.getElementById('cartBtn').onclick = () => {
      if (cart.length === 0) {
        showToast('Your cart is empty');
        return;
      }
      renderCart();
      document.getElementById('cartModal').classList.add('active');
    };

    function closeCart() {
      document.getElementById('cartModal').classList.remove('active');
    }

    function renderCart() {
      const cartItems = document.getElementById('cartItems');
      const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
      
      cartItems.innerHTML = cart.map(item => `
        <div style="display: flex; justify-content: space-between; align-items: center; padding: 16px; border-bottom: 1px solid #e5e7eb;">
          <div style="display: flex; align-items: center; gap: 12px;">
            <span style="font-size: 2rem;">${item.emoji}</span>
            <div>
              <div style="font-weight: 600; color: #333;">${item.name}</div>
              <div style="color: #666;">‚Çπ${item.price} √ó ${item.quantity}</div>
            </div>
          </div>
          <div style="display: flex; align-items: center; gap: 12px;">
            <button onclick="updateQuantity(${item.id}, -1)" style="background: #f3f4f6; border: none; width: 32px; height: 32px; border-radius: 50%; cursor: pointer; font-weight: 700;">-</button>
            <span style="font-weight: 600;">${item.quantity}</span>
            <button onclick="updateQuantity(${item.id}, 1)" style="background: #f3f4f6; border: none; width: 32px; height: 32px; border-radius: 50%; cursor: pointer; font-weight: 700;">+</button>
            <button onclick="removeFromCart(${item.id})" style="background: #fee2e2; color: #dc2626; border: none; padding: 8px 12px; border-radius: 6px; cursor: pointer; font-weight: 600;">Remove</button>
          </div>
        </div>
      `).join('');
      
      document.getElementById('cartTotal').textContent = `‚Çπ${total}`;
    }

    function updateQuantity(productId, change) {
      const item = cart.find(item => item.id === productId);
      if (item) {
        item.quantity += change;
        if (item.quantity <= 0) {
          removeFromCart(productId);
        } else {
          renderCart();
          updateCartCount();
        }
      }
    }

    function removeFromCart(productId) {
      cart = cart.filter(item => item.id !== productId);
      renderCart();
      updateCartCount();
      if (cart.length === 0) {
        closeCart();
      }
    }

    function proceedToCheckout() {
      if (!currentUser) {
        closeCart();
        showToast('Please sign in to checkout');
        document.getElementById('authModal').classList.add('active');
        return;
      }
      closeCart();
      document.getElementById('checkoutModal').classList.add('active');
    }

    function closeCheckout() {
      document.getElementById('checkoutModal').classList.remove('active');
    }

    async function handleCheckout(event) {
      event.preventDefault();
      
      const submitBtn = document.getElementById('checkoutSubmitBtn');
      submitBtn.disabled = true;
      submitBtn.textContent = 'Processing...';
      
      const name = document.getElementById('checkoutName').value;
      const email = document.getElementById('checkoutEmail').value;
      const phone = document.getElementById('checkoutPhone').value;
      const address = document.getElementById('checkoutAddress').value;
      const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
      
      const orderId = 'ORD' + Date.now();
      const orderData = {
        id: orderId,
        type: 'order',
        order_id: orderId,
        user_id: currentUser.id,
        items: JSON.stringify(cart),
        total: total,
        shipping_address: `${name}, ${address}`,
        phone: phone,
        status: 'pending',
        created_at: new Date().toISOString()
      };
      
      const result = await window.dataSdk.create(orderData);
      
      if (result.isOk) {
        // Send notification
        await sendOrderNotification(orderData, email);
        
        cart = [];
        updateCartCount();
        closeCheckout();
        showToast('Order placed successfully! üéâ');
        document.getElementById('checkoutForm').reset();
      } else {
        showToast('Failed to place order. Please try again.');
      }
      
      submitBtn.disabled = false;
      submitBtn.textContent = 'Place Order';
    }

    async function sendOrderNotification(order, customerEmail) {
      // Note: This is a demo. In production, you would need a backend service to send actual notifications.
      // The notification details would be sent to +916397884131 and aqibj3436@gmail.com
      const items = JSON.parse(order.items);
      const message = `New Order #${order.order_id}\nTotal: ‚Çπ${order.total}\nCustomer: ${order.shipping_address}\nPhone: ${order.phone}\nItems: ${items.map(i => `${i.name} (${i.quantity})`).join(', ')}`;
      console.log('Order notification:', message);
      console.log('Send to: +916397884131 and aqibj3436@gmail.com');
    }

    document.getElementById('trackOrderBtn').onclick = () => {
      if (!currentUser) {
        showToast('Please sign in to track orders');
        document.getElementById('authModal').classList.add('active');
        return;
      }
      renderUserOrders();
      document.getElementById('trackOrderModal').classList.add('active');
    };

    function closeTrackOrder() {
      document.getElementById('trackOrderModal').classList.remove('active');
    }

    function renderUserOrders() {
      const content = document.getElementById('userOrdersContent');
      const userOrders = allOrders.filter(order => order.user_id === currentUser.id);
      
      if (userOrders.length === 0) {
        content.innerHTML = '<p style="text-align: center; color: #666; padding: 32px;">You have no orders yet.</p>';
        return;
      }
      
      content.innerHTML = userOrders.map(order => {
        const items = JSON.parse(order.items);
        const statusColors = {
          pending: '#f59e0b',
          processing: '#3b82f6',
          shipped: '#8b5cf6',
          delivered: '#10b981',
          cancelled: '#ef4444'
        };
        const statusColor = statusColors[order.status] || '#6b7280';
        
        return `
          <div style="border: 2px solid #e5e7eb; border-radius: 12px; padding: 20px; margin-bottom: 16px; background: #f9fafb;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; flex-wrap: wrap; gap: 8px;">
              <div>
                <div style="font-weight: 700; font-size: 1.125rem; color: #333;">Order #${order.order_id}</div>
                <div style="color: #666; font-size: 0.875rem; margin-top: 4px;">${new Date(order.created_at).toLocaleDateString('en-IN', { year: 'numeric', month: 'long', day: 'numeric' })}</div>
              </div>
              <div style="background: ${statusColor}; color: white; padding: 6px 16px; border-radius: 9999px; font-weight: 600; font-size: 0.875rem; text-transform: capitalize;">
                ${order.status}
              </div>
            </div>
            
            <div style="border-top: 1px solid #e5e7eb; padding-top: 12px; margin-bottom: 12px;">
              <div style="font-weight: 600; color: #333; margin-bottom: 8px;">Items:</div>
              ${items.map(item => `
                <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 4px;">
                  <span>${item.emoji}</span>
                  <span style="color: #666;">${item.name} √ó ${item.quantity}</span>
                  <span style="color: #667eea; font-weight: 600; margin-left: auto;">‚Çπ${item.price * item.quantity}</span>
                </div>
              `).join('')}
            </div>
            
            <div style="border-top: 1px solid #e5e7eb; padding-top: 12px;">
              <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                <span style="color: #666;">Shipping Address:</span>
                <span style="color: #333; font-weight: 600; text-align: right;">${order.shipping_address}</span>
              </div>
              <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                <span style="color: #666;">Phone:</span>
                <span style="color: #333; font-weight: 600;">${order.phone}</span>
              </div>
              <div style="display: flex; justify-content: space-between; font-size: 1.125rem; font-weight: 700; margin-top: 12px; padding-top: 12px; border-top: 2px solid #e5e7eb;">
                <span style="color: #333;">Total:</span>
                <span style="color: #667eea;">‚Çπ${order.total}</span>
              </div>
            </div>
          </div>
        `;
      }).join('');
    }

    document.getElementById('signInBtn').onclick = () => {
      if (currentUser) {
        currentUser = null;
        document.getElementById('signInBtn').textContent = 'Sign In';
        document.getElementById('signUpBtn').style.display = 'block';
        showToast('Signed out successfully');
      } else {
        isSignUp = false;
        updateAuthModal();
        document.getElementById('authModal').classList.add('active');
      }
    };

    document.getElementById('signUpBtn').onclick = () => {
      isSignUp = true;
      updateAuthModal();
      document.getElementById('authModal').classList.add('active');
    };

    function closeAuth() {
      document.getElementById('authModal').classList.remove('active');
      isSignUp = false;
      updateAuthModal();
    }

    function toggleAuthMode() {
      isSignUp = !isSignUp;
      updateAuthModal();
    }

    function updateAuthModal() {
      document.getElementById('authTitle').textContent = isSignUp ? 'Sign Up' : 'Sign In';
      document.getElementById('authSubmitBtn').textContent = isSignUp ? 'Sign Up' : 'Sign In';
      document.getElementById('toggleAuthBtn').textContent = isSignUp ? 'Already have an account? Sign In' : "Don't have an account? Sign Up";
      document.getElementById('nameField').classList.toggle('hide', !isSignUp);
      if (isSignUp) {
        document.getElementById('authName').required = true;
      } else {
        document.getElementById('authName').required = false;
      }
    }

    async function handleAuth(event) {
      event.preventDefault();
      
      const submitBtn = document.getElementById('authSubmitBtn');
      submitBtn.disabled = true;
      submitBtn.textContent = 'Processing...';
      
      const email = document.getElementById('authEmail').value;
      const password = document.getElementById('authPassword').value;
      
      if (isSignUp) {
        const name = document.getElementById('authName').value;
        const userId = 'USER' + Date.now();
        const userData = {
          id: userId,
          type: 'user',
          name: name,
          email: email,
          password: password,
          created_at: new Date().toISOString()
        };
        
        const result = await window.dataSdk.create(userData);
        
        if (result.isOk) {
          currentUser = userData;
          document.getElementById('signInBtn').textContent = `üëã ${name}`;
          document.getElementById('signUpBtn').style.display = 'none';
          closeAuth();
          showToast('Account created successfully! üéâ');
          document.getElementById('authForm').reset();
        } else {
          showToast('Failed to create account. Please try again.');
        }
      } else {
        const user = allUsers.find(u => u.email === email && u.password === password);
        if (user) {
          currentUser = user;
          document.getElementById('signInBtn').textContent = `üëã ${user.name}`;
          document.getElementById('signUpBtn').style.display = 'none';
          closeAuth();
          showToast('Signed in successfully! üéâ');
          document.getElementById('authForm').reset();
        } else {
          showToast('Invalid email or password');
        }
      }
      
      submitBtn.disabled = false;
      submitBtn.textContent = isSignUp ? 'Sign Up' : 'Sign In';
    }

    // Hide splash screen after animation
    setTimeout(() => {
      document.getElementById('splashScreen').style.display = 'none';
    }, 3000);

    // Initialize app
    initApp();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a61c355d481b2c8',t:'MTc2NDQxNTcyMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
